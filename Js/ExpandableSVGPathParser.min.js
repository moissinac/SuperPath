(function(){function a(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c],n+=c)}function b(a){var b="";return e(a.d)&&(b+=a.d+" "),e(a.ctlpt1)&&(b+=a.ctlpt1.x+","+a.ctlpt1.y+" "),e(a.ctlpt2)&&(b+=a.ctlpt2.x+","+a.ctlpt2.y+" "),e(a.target)&&(b+=a.target.x+","+a.target.y),b}function c(){return this.command+b(this)}function d(a,b){var c=new RegExp("(["+n+"])(["+n+"])","gm");this.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},this.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},b=b.replace(/,/gm," "),b=b.replace(c,"$1 $2"),b=b.replace(c,"$1 $2"),c=new RegExp("(["+n+"])([^s])","gm"),b=b.replace(c,"$1 $2"),c=new RegExp("([^s])(["+n+"])","gm"),b=b.replace(c,"$1 $2"),b=b.replace(/([0-9])([+\-])/gm,"$1 $2"),b=b.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),b=b.replace(/([Aa](\s+[0-9]+){3})\s+ ([01])\s*([01])/gm,"$1 $3 $4 "),b=this.compressSpaces(b),b=this.trim(b),c=new RegExp("^["+n+"]$","gm"),this.tokens=b.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!==this.tokens[this.i+1].match(c)},this.isRelativeCommand=function(){return-1!==m.indexOf(this.command)},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(b){var c=new a.Point(this.getScalar(),this.getScalar());return b?c:this.makeAbsolute(c)},this.getAsControlPoint=function(a){var b=this.getPoint(a);return this.control=b,b},this.getAsCurrentPoint=function(a){var b=this.getPoint(a);return this.current=b,b},this.getReflectedControlPoint=function(){if("c"!==this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()&&"q"!==this.previousCommand.toLowerCase()&&"t"!==this.previousCommand.toLowerCase())return this.current;var b=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return b},this.makeAbsolute=function(a){return this.isRelativeCommand()&&a.translate(this.current.x,this.current.y),a}}function e(a){return null!==a&&void 0!==a}function f(a,b,c){var d=new k.Command(a),e=new k.Point(b,c);return d.crtPt=new k.Point(e.x,e.y),d.target=e,d}function g(a,b,c){var d=f(a,b.cmd[c].target.x,b.cmd[c].target.y);return d.ctlpt1=new k.Point(b.cmd[c].ctlpt1.x,b.cmd[c].ctlpt1.y),d.ctlpt2=new k.Point(b.cmd[c].ctlpt2.x,b.cmd[c].ctlpt2.y),d}function h(a,b,c){var d=f(a,b.cmd[c].target.x,b.cmd[c].target.y);return d.virtual_cntrlpt=new k.Point(b.cmd[c].virtual_cntrlpt.x,b.cmd[c].virtual_cntrlpt.y),d.ctlpt2=new k.Point(b.cmd[c].ctlpt2.x,b.cmd[c].ctlpt2.y),d}function i(a,b,c){var d=f(a,b.cmd[c].target.x,b.cmd[c].target.y);return d.ctlpt1=new k.Point(b.cmd[c].ctlpt1.x,b.cmd[c].ctlpt1.y),d}function j(a,b,c){var d=f(a,b.cmd[c].target.x,b.cmd[c].target.y);return d.virtual_cntrlpt=new k.Point(b.cmd[c].virtual_cntrlpt.x,b.cmd[c].virtual_cntrlpt.y),d}var k={version:"0.1.14",ParseToken:{},TokensToString:{},Command:function(a){},Point:function(a,b){},CmdList:function(){},addCommands:function(b){a(k.ParseToken,b)},addCmdCreationRules:function(b){a(B,b)},addStringifier:function(b){a(k.TokensToString,b)},fullrelativePathCmdList:function(a){},svg_parse_path:function(a,b){}},l="MZLHVCSQTA",m="mzlhvcsqta",n=l+m;k.Point=function(a,b){this.x=a,this.y=b,this.translate=function(a,b){this.x+=a,this.y+=b}},k.TokensToString={h:c,v:c,H:c,V:c,z:c,"default":c},k.Command=function(a){var b={command:a,toString:k.TokensToString[a]||k.TokensToString["default"]};return b};var o=function(a,b){var c=a.getAsCurrentPoint(a.isRelativeCommand()),d=new k.Command(a.command);for(d.target=c,d.absEndPt=c,b.push(d),a.start=a.current;!a.isCommandOrEnd();)c=a.getAsCurrentPoint(a.isRelativeCommand()),d=new k.Command("L"),d.target=c,d.absEndPt=new k.Point(c.x,c.y),b.push(d)},p=function(a,b){var c,d;do c=new k.Command(a.command),c.current=a.current,d=a.getAsCurrentPoint(a.isRelativeCommand()),c.target=d,c.absEndPt=new k.Point(d.x,d.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},q=function(a,b){var c,d,f;do c=new k.Command(a.command),c.current=a.current,d=a.getScalar(),f=new k.Point((a.isRelativeCommand()?a.current.x:0)+d,a.current.y),a.current=f,c.d=(a.isRelativeCommand()?a.current.x:0)+d,c.absEndPt=new k.Point(f.x,f.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},r=function(a,b){var c,d,f;do c=new k.Command(a.command),c.current=a.current,d=a.getScalar(),f=new k.Point(a.current.x,(a.isRelativeCommand()?a.current.y:0)+d),a.current=f,c.d=(a.isRelativeCommand()?a.current.x:0)+d,c.absEndPt=new k.Point(f.x,f.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},s=function(a,b){var c,d,f,g;do c=new k.Command(a.command),c.current=a.current,d=a.getAsControlPoint(a.isRelativeCommand()),f=a.getAsControlPoint(a.isRelativeCommand()),g=a.getAsCurrentPoint(a.isRelativeCommand()),c.ctlpt1=d,c.ctlpt2=f,c.target=g,c.absEndPt=new k.Point(g.x,g.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},t=function(a,b){var c,d,f,g;do c=new k.Command(a.command),c.current=a.current,d=a.getReflectedControlPoint(),f=a.getAsControlPoint(a.isRelativeCommand()),g=a.getAsCurrentPoint(a.isRelativeCommand()),c.virtual_cntrlpt=d,c.ctlpt2=f,c.target=g,c.absEndPt=new k.Point(g.x,g.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},u=function(a,b){var c,d,f;do c=new k.Command(a.command),c.current=a.current,d=a.getAsControlPoint(a.isRelativeCommand()),f=a.getAsCurrentPoint(a.isRelativeCommand()),c.ctlpt1=d,c.target=f,c.absEndPt=new k.Point(f.x,f.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},v=function(a,b){var c,d,f;do c=new k.Command(a.command),c.current=a.current,d=a.getReflectedControlPoint(),f=a.getAsCurrentPoint(a.isRelativeCommand()),c.virtual_cntrlpt=d,c.target=f,c.absEndPt=new k.Point(f.x,f.y),a.isRelativeCommand(c.command)&&e(b.cmd[b.cmd.length-1].absEndPt)&&c.absEndPt.translate(b.cmd[b.cmd.length-1].absEndPt.x,b.cmd[b.cmd.length-1].absEndPt.y),b.push(c);while(!a.isCommandOrEnd())},w=function(a,b){},x=function(a,b){var c;do c=new k.Command(a.command),c.current=a.current,b.push(c);while(!a.isCommandOrEnd())},y={M:o,L:p,H:q,V:r,C:s,S:t,Q:u,T:v,A:w,Z:x},z={m:o,l:p,h:q,v:r,c:s,s:t,q:u,t:v,a:w,z:x};k.addCommands(y),k.addCommands(z);var A=function(a,b,c,d){var e=f(d,a.cmd[c].target.x,a.cmd[c].target.y);return e},B={v:function(a,b,c,d){var e=f(d,b.cmd[c-1].crtPt.x,a.cmd[c].d);return e.d=e.target.y,e},V:function(a,b,c,d){var e=f(d,b.cmd[c-1].crtPt.x,a.cmd[c].d);return"V"===d&&(e.command="v",e.target.y-=b.cmd[c-1].crtPt.y),e.d=e.target.y,e},h:function(a,b,c,d){var e=f(d,a.cmd[c].d,b.cmd[c-1].crtPt.y);return e.d=e.target.x,e},H:function(a,b,c,d){var e=f(d,a.cmd[c].d,b.cmd[c-1].crtPt.y);return"H"===d&&(e.command="h",e.target.x-=b.cmd[c-1].crtPt.x),e.d=e.target.x,e},m:A,M:A,l:A,L:function(a,b,c,d){var e=f(d,a.cmd[c].target.x,a.cmd[c].target.y);return"L"===d&&(e.command="l",e.target.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y)),e},q:function(a,b,c,d){return i(d,a,c)},Q:function(a,b,c,d){var e=i(d,a,c);return"Q"===d&&(e.command="q",e.ctlpt1.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.target.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y)),e},t:function(a,b,c,d){return j(d,a,c)},T:function(a,b,c,d){var e=j(d,a,c);return"T"===d&&(e.command="t",e.virtual_cntrlpt.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.target.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y)),e},c:function(a,b,c,d){return g(d,a,c)},C:function(a,b,c,d){var e=g(d,a,c);return"C"===d&&(e.command="c",e.ctlpt1.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.ctlpt2.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.target.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y)),e},s:function(a,b,c,d){return h(d,a,c)},S:function(a,b,c,d){var e=h(d,a,c);return"S"===d&&(e.command="s",e.virtual_cntrlpt.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.ctlpt2.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y),e.target.translate(-b.cmd[c-1].crtPt.x,-b.cmd[c-1].crtPt.y)),e},z:function(a,b,c,d){var e=new k.Command("z");return e},"default":function(a,b,c,d){return null}};k.CmdList=function(){this.cmd=[];var a=function(a,b,c){var d=new k.Point(-1*c.target.x,-1*c.target.y);b.target=d},b=function(a,b,c){var d=new k.Point(c.target.x,c.target.y);b.ctlpt1=new k.Point(c.ctlpt1.x-d.x,c.ctlpt1.y-d.y),b.target=new k.Point(-1*d.x,-1*d.y)},c=function(a,b,c){var d=new k.Point(c.target.x,c.target.y);b.command="q",b.ctlpt1=new k.Point(c.virtual_cntrlpt.x-d.x,c.virtual_cntrlpt.y-d.y),b.target=new k.Point(-1*d.x,-1*d.y)},d=function(a,b,c){var d=new k.Point(c.target.x,c.target.y);b.ctlpt1=new k.Point(c.ctlpt2.x-d.x,c.ctlpt2.y-d.y),b.ctlpt2=new k.Point(c.ctlpt1.x-d.x,c.ctlpt1.y-d.y),b.target=new k.Point(-1*d.x,-1*d.y)},e=function(a,b,c){var d=new k.Point(c.target.x,c.target.y);b.command="c",b.ctlpt1=new k.Point(c.ctlpt2.x-d.x,c.ctlpt2.y-d.y),b.ctlpt2=new k.Point(c.virtual_cntrlpt.x-d.x,c.virtual_cntrlpt.y-d.y),b.target=new k.Point(-1*d.x,-1*d.y)};this.reverseRules={M:a,h:function(a,b,c){b.d=-1*c.d},v:function(a,b,c){b.d=-1*c.d},l:a,c:d,s:e,q:b,t:c},this.reverse=function(){var a,b,c=new k.CmdList;for(a=this.cmd.length-1;a>=0;a-=1){b=new k.Command(this.cmd[a].command);var d=this.reverseRules[b.command];d(a,b,this.cmd[a]),c.push(b)}return c},this.push=function(a){this.cmd.push(a)},this.toString=function(){var a=0,b="";for(a=0;this.cmd.length>a;a+=1)b+=this.cmd[a].toString();return b}},k.fullrelativePathCmdList=function(a){var b,c=new k.CmdList,d={x:0,y:0},e=null,f=0,g=a.cmd.length;for(d.x=a.cmd[0].target.x,d.y=a.cmd[0].target.y;g>f;){b=a.cmd[f].command;var h=B[b]||B["default"];h&&(e=h(a,c,f,b),e&&(c.cmd.push(e),e=null)),f+=1}return c},k.svg_parse_path=function(a,b){var c,f=a,g=new k.CmdList;for(c=e(b)?this.PathParser=b:this.PathParser=new d(k,f),c.reset();!c.isEnd();)c.nextCommand(),k.ParseToken[c.command](c,g);return g},"function"==typeof define&&define.amd?define(k):"object"==typeof module&&module.exports?module.exports=k:this.pathparser=k}).call(this);